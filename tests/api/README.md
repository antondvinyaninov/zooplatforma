# –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã API –ó–æ–æ–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API –≤—Å–µ—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-—Ç–µ—Å—Ç–æ–≤)
- [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
- [–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏](#–ø–æ–∫—Ä—ã—Ç–∏–µ-—Ç–µ—Å—Ç–∞–º–∏)
- [–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤](#–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ-–Ω–æ–≤—ã—Ö-—Ç–µ—Å—Ç–æ–≤)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Go 1.25+** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
2. **–í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã:**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
   ./run
   
   # –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
   make all
   ```

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
cd tests/api
go test -v
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞

```bash
go test -v -run TestHealthCheck
go test -v -run TestAuthRegister
go test -v -run TestCreatePost
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/api/
‚îú‚îÄ‚îÄ README.md              # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ main_api_test.go       # –¢–µ—Å—Ç—ã Main API (–ø–æ—Ä—Ç 8000)
‚îú‚îÄ‚îÄ admin_api_test.go      # –¢–µ—Å—Ç—ã Admin API (–ø–æ—Ä—Ç 9000) - TODO
‚îú‚îÄ‚îÄ petid_api_test.go      # –¢–µ—Å—Ç—ã PetID API (–ø–æ—Ä—Ç 8100) - TODO
‚îî‚îÄ‚îÄ go.mod                 # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤
```

---

## üß™ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

### Main API (localhost:8000)

#### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (7 —Ç–µ—Å—Ç–æ–≤)

1. **TestHealthCheck** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API
   - `GET /api/health`
   - –û–∂–∏–¥–∞–µ—Ç—Å—è: `status: ok`

2. **TestAuthRegister** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `POST /api/auth/register`
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π email –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ø–µ—à–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

3. **TestAuthLogin** - –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
   - `POST /api/auth/login`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞ –≤ cookie
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤

4. **TestGetPosts** - –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–µ–Ω—Ç—ã –ø–æ—Å—Ç–æ–≤
   - `GET /api/posts`
   - –ü—É–±–ª–∏—á–Ω—ã–π endpoint (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

5. **TestCreatePost** - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
   - `POST /api/posts`
   - –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (JWT cookie)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ —Ç–µ–≥–∞–º–∏

6. **TestUnauthorizedAccess** - –∑–∞—â–∏—Ç–∞ endpoints
   - –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –û–∂–∏–¥–∞–µ—Ç—Å—è: `401 Unauthorized`

7. **TestReportCreation** - —Å–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–±—ã
   - `POST /api/reports`
   - –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏—Å—Ç–µ–º—É –º–æ–¥–µ—Ä–∞—Ü–∏–∏

#### üîú –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (TODO)

- **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:**
  - `POST /api/posts/{id}/comments` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - `GET /api/posts/{id}/comments` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
  - `DELETE /api/comments/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è

- **–õ–∞–π–∫–∏:**
  - `POST /api/posts/{id}/like` - –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫
  - `DELETE /api/posts/{id}/like` - —É–±—Ä–∞—Ç—å –ª–∞–π–∫
  - `GET /api/posts/{id}/likes` - —Å–ø–∏—Å–æ–∫ –ª–∞–π–∫–æ–≤

- **–î—Ä—É–∑—å—è:**
  - `POST /api/friends/send` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –¥—Ä—É–∑—å—è
  - `POST /api/friends/accept` - –ø—Ä–∏–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å
  - `DELETE /api/friends/remove` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –¥—Ä—É–∑–µ–π
  - `GET /api/friends` - —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π

- **–ü—Ä–æ—Ñ–∏–ª—å:**
  - `GET /api/users/{id}` - –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  - `PUT /api/profile` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  - `PUT /api/profile/avatar` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä

- **–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:**
  - `GET /api/organizations` - —Å–ø–∏—Å–æ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
  - `GET /api/organizations/{id}` - –ø—Ä–æ—Ñ–∏–ª—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
  - `POST /api/organizations` - —Å–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é

### Admin API (localhost:9000)

#### üîú –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (TODO)

- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:**
  - `GET /api/admin/me` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω–∞
  
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
  - `GET /api/admin/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - `GET /api/admin/users/{id}` - –¥–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `PUT /api/admin/users/{id}/verify` - –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- **–ú–æ–¥–µ—Ä–∞—Ü–∏—è:**
  - `GET /api/admin/moderation/reports` - —Å–ø–∏—Å–æ–∫ –∂–∞–ª–æ–±
  - `POST /api/admin/moderation/reports/{id}` - —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∂–∞–ª–æ–±—É
  - `GET /api/admin/moderation/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏

- **–†–æ–ª–∏:**
  - `POST /api/roles/grant` - –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å
  - `POST /api/roles/revoke` - –æ—Ç–æ–∑–≤–∞—Ç—å —Ä–æ–ª—å
  - `GET /api/users/{id}/roles` - —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### PetID API (localhost:8100)

#### üîú –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (TODO)

- **–ü–∏—Ç–æ–º—Ü—ã:**
  - `GET /api/pets` - —Å–ø–∏—Å–æ–∫ –ø–∏—Ç–æ–º—Ü–µ–≤
  - `GET /api/pets/{id}` - –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–∏—Ç–æ–º—Ü–∞
  - `POST /api/pets` - —Å–æ–∑–¥–∞—Ç—å –ø–∏—Ç–æ–º—Ü–∞
  - `PUT /api/pets/{id}` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
  - `DELETE /api/pets/{id}` - —É–¥–∞–ª–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞

- **–°–æ–±—ã—Ç–∏—è:**
  - `GET /api/petid/{id}/events` - –∏—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π
  - `POST /api/petid/{id}/events` - –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ

- **–ú–µ–¥–∏—Ü–∏–Ω–∞:**
  - `GET /api/petid/{id}/medical` - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è

---

## üîß –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –í—Å–µ —Ç–µ—Å—Ç—ã

```bash
cd tests/api
go test -v
```

**–í—ã–≤–æ–¥:**
```
=== RUN   TestHealthCheck
‚úÖ Health check –ø—Ä–æ–π–¥–µ–Ω
--- PASS: TestHealthCheck (0.01s)
=== RUN   TestAuthRegister
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–π–¥–µ–Ω–∞
--- PASS: TestAuthRegister (0.05s)
=== RUN   TestAuthLogin
‚úÖ –í—Ö–æ–¥ –ø—Ä–æ–π–¥–µ–Ω, —Ç–æ–∫–µ–Ω –ø–æ–ª—É—á–µ–Ω
--- PASS: TestAuthLogin (0.08s)
...
PASS
ok      api_test        2.456s
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç

```bash
go test -v -run TestHealthCheck
```

### –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º

```bash
go test -v -count=1
```

–§–ª–∞–≥ `-count=1` –æ—Ç–∫–ª—é—á–∞–µ—Ç –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

```bash
go test -v -parallel 4
```

–ó–∞–ø—É—Å–∫–∞–µ—Ç –¥–æ 4 —Ç–µ—Å—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –®–∞–±–ª–æ–Ω —Ç–µ—Å—Ç–∞

```go
// TestNewFeature –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é
func TestNewFeature(t *testing.T) {
    // 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
    authCookie := loginTestUser(t)
    
    // 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    payload := map[string]interface{}{
        "field1": "value1",
        "field2": 123,
    }
    
    // 3. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
    body, _ := json.Marshal(payload)
    req, _ := http.NewRequest("POST", BaseURL+"/api/endpoint", bytes.NewBuffer(body))
    req.Header.Set("Content-Type", "application/json")
    if authCookie != nil {
        req.AddCookie(authCookie)
    }
    
    client := &http.Client{}
    resp, err := client.Do(req)
    if err != nil {
        t.Fatalf("–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: %v", err)
    }
    defer resp.Body.Close()
    
    // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
    if resp.StatusCode != http.StatusOK {
        t.Errorf("–û–∂–∏–¥–∞–ª—Å—è —Å—Ç–∞—Ç—É—Å 200, –ø–æ–ª—É—á–µ–Ω %d", resp.StatusCode)
    }
    
    // 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
    var result Response
    if err := json.NewDecoder(resp.Body).Decode(&result); err != nil {
        t.Fatalf("–û—à–∏–±–∫–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JSON: %v", err)
    }
    
    if !result.Success {
        t.Errorf("–ó–∞–ø—Ä–æ—Å –Ω–µ —É–¥–∞–ª—Å—è: %s", result.Error)
    }
    
    // 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
    if result.Data["field"] != "expected_value" {
        t.Errorf("–ù–µ–≤–µ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è")
    }
    
    t.Log("‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω")
}
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```go
// loginTestUser —Å–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç auth cookie
func loginTestUser(t *testing.T) *http.Cookie {
    testEmail := "test_" + time.Now().Format("20060102150405") + "@example.com"
    
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    registerPayload := map[string]string{
        "name":     "Test User",
        "email":    testEmail,
        "password": "testpassword123",
    }
    body, _ := json.Marshal(registerPayload)
    http.Post(BaseURL+"/api/auth/register", "application/json", bytes.NewBuffer(body))
    
    // –õ–æ–≥–∏–Ω
    loginPayload := map[string]string{
        "email":    testEmail,
        "password": "testpassword123",
    }
    body, _ = json.Marshal(loginPayload)
    loginResp, _ := http.Post(BaseURL+"/api/auth/login", "application/json", bytes.NewBuffer(body))
    defer loginResp.Body.Close()
    
    // –ü–æ–ª—É—á–∞–µ–º cookie
    for _, cookie := range loginResp.Cookies() {
        if cookie.Name == "auth_token" {
            return cookie
        }
    }
    
    t.Fatal("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å auth_token")
    return nil
}
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

- **Main API:** 7 —Ç–µ—Å—Ç–æ–≤ (–±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
- **Admin API:** 0 —Ç–µ—Å—Ç–æ–≤ (TODO)
- **PetID API:** 0 —Ç–µ—Å—Ç–æ–≤ (TODO)

**–í—Å–µ–≥–æ:** 7 —Ç–µ—Å—Ç–æ–≤

### –¶–µ–ª–µ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è MVP

- **Main API:** ~30 —Ç–µ—Å—Ç–æ–≤ (–≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints)
- **Admin API:** ~15 —Ç–µ—Å—Ç–æ–≤ (–º–æ–¥–µ—Ä–∞—Ü–∏—è, —Ä–æ–ª–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- **PetID API:** ~20 —Ç–µ—Å—Ç–æ–≤ (CRUD –ø–∏—Ç–æ–º—Ü–µ–≤, —Å–æ–±—ã—Ç–∏—è, –º–µ–¥–∏—Ü–∏–Ω–∞)

**–¶–µ–ª—å:** 65+ —Ç–µ—Å—Ç–æ–≤

---

## üêõ –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Main API
curl http://localhost:8000/api/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Admin API
curl http://localhost:9000/api/admin/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PetID API
curl http://localhost:8100/api/health
```

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç –ø–∞–¥–∞–µ—Ç —Å 401 Unauthorized

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

```go
// –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ cookie –¥–æ–±–∞–≤–ª–µ–Ω –∫ –∑–∞–ø—Ä–æ—Å—É
req.AddCookie(authCookie)
```

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–µ—Å—Ç –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è JSON

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API:

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123"}'
```

---

## üìù Best Practices

1. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** –ì–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ email/–∏–º–µ–Ω–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞
   ```go
   testEmail := "test_" + time.Now().Format("20060102150405") + "@example.com"
   ```

2. **–û—á–∏—Å—Ç–∫–∞:** –ó–∞–∫—Ä—ã–≤–∞–π—Ç–µ HTTP connections
   ```go
   defer resp.Body.Close()
   ```

3. **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `t.Log()` –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
   ```go
   t.Log("‚úÖ –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω")
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –æ—à–∏–±–∫–∏
   ```go
   if err != nil {
       t.Fatalf("–û—à–∏–±–∫–∞: %v", err)
   }
   ```

5. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º
   - –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
   - –ù–µ –∏–∑–º–µ–Ω—è–π—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Go Testing Package](https://pkg.go.dev/testing)
- [HTTP Testing in Go](https://golang.org/pkg/net/http/httptest/)
- [Table-Driven Tests](https://dave.cheney.net/2019/05/07/prefer-table-driven-tests)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–∞–º–∏:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ `logs/`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã —Å —Ñ–ª–∞–≥–æ–º `-v` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –≤ `docs/API_ENDPOINTS.md`

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 14 —è–Ω–≤–∞—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 0.10.6
