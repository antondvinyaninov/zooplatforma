# API Endpoints –ó–æ–æ–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 29 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** Development

---

## üåê –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –∏ –ø–æ—Ä—Ç—ã

| –°–µ—Ä–≤–∏—Å | URL (Dev) | URL (Production) | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|------------------|----------|
| **Main** | http://localhost:3000 | https://zooplatform.ru | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç (—Å–æ—Ü—Å–µ—Ç—å) |
| **Main API** | http://localhost:8000 | https://api.zooplatform.ru | Backend –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∞–π—Ç–∞ |
| **Admin** | http://localhost:4000 | https://admin.zooplatform.ru | –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å |
| **Admin API** | http://localhost:9000 | https://admin-api.zooplatform.ru | Backend –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ |
| **PetID** | http://localhost:410x0 | https://petid.zooplatform.ru | –†–µ–µ—Å—Ç—Ä –∂–∏–≤–æ—Ç–Ω—ã—Ö |
| **PetID API** | http://localhost:8100 | https://petid-api.zooplatform.ru | Backend —Ä–µ–µ—Å—Ç—Ä–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö |
| **Shelter** | http://localhost:5000 | https://shelter.zooplatform.ru | –ö–∞–±–∏–Ω–µ—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π |
| **Shelter API** | http://localhost:8200 | https://shelter-api.zooplatform.ru | Backend –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π |
| **Mobile** | http://localhost:8081 | - | React Native (Expo) |

---

## üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–∏–ø—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**Main API –∏ Admin API:** JWT —Ç–æ–∫–µ–Ω—ã –≤ cookie `auth_token`  
**PetID API:** JWT —Ç–æ–∫–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>` –∏–ª–∏ X-User-ID (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

**SSO (Single Sign-On):** –í—Ö–æ–¥ –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–∏—Å–µ ‚Üí —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –≤–µ–∑–¥–µ.

### –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ –∏ –ø—É–±–ª–∏—á–Ω—ã–µ endpoints

#### –ü—É–±–ª–∏—á–Ω—ã–µ (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- `GET /api/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
- `GET /api/species` - —Å–ø–∏—Å–æ–∫ –≤–∏–¥–æ–≤ –∂–∏–≤–æ—Ç–Ω—ã—Ö
- `GET /api/breeds` - —Å–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–¥
- `GET /api/cards` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ –ø–æ—Ä–æ–¥–∞—Ö

#### –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ (—Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- –í—Å–µ endpoints `/api/pets/*` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–æ–º—Ü–∞–º–∏
- –í—Å–µ endpoints `/api/admin/*` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –í—Å–µ endpoints `/api/posts/*` - —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞

–ü—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏—è—Ö UPDATE –∏ DELETE —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –ø–∏—Ç–æ–º—Ü–µ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø–æ—Å—Ç—ã
- User ID –±–µ—Ä—ë—Ç—Å—è –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞, –∞ –Ω–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏)

### CORS

–†–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ origins –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `ALLOWED_ORIGINS`:

**Development:**
- `http://localhost:3000` - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç
- `http://localhost:4100` - –ó–æ–æ–ë–∞–∑–∞ frontend

**Production:**
- `https://zooplatform.ru`
- `https://petid.zooplatform.ru`
- –î—Ä—É–≥–∏–µ –¥–æ–º–µ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∞

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### –° JWT —Ç–æ–∫–µ–Ω–æ–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
```bash
curl -H "Authorization: Bearer eyJhbGc..." http://localhost:8100/api/pets
```

#### –° X-User-ID (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
```bash
curl -H "X-User-ID: 1" http://localhost:8100/api/pets
```

#### –ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø—É–±–ª–∏—á–Ω—ã–µ endpoints)
```bash
curl http://localhost:8100/api/species
```

### –ö–æ–¥—ã –æ—à–∏–±–æ–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- `401 Unauthorized` - –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–∫–µ–Ω –∏–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π
- `403 Forbidden` - –ø–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —á—É–∂–æ–º—É —Ä–µ—Å—É—Ä—Å—É –∏–ª–∏ –Ω–µ—Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–π origin
- `429 Too Many Requests` - –ø—Ä–µ–≤—ã—à–µ–Ω rate limit

---

## üì± Main API (localhost:8000)

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```
POST   /api/auth/register          –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST   /api/auth/login             –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
POST   /api/auth/logout            –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
GET    /api/auth/me                –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

```
GET    /api/users                  –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /api/users/:id              –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
PUT    /api/profile                –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
GET    /api/profile/:id            –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ü–æ—Å—Ç—ã

```
GET    /api/posts                  –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã (–ª–µ–Ω—Ç–∞)
GET    /api/posts/:id              –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç –ø–æ ID
POST   /api/posts                  –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç
PUT    /api/posts/:id              –û–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –ø–æ—Å—Ç
DELETE /api/posts/:id              –£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –ø–æ—Å—Ç
GET    /api/posts/user/:id         –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

```
GET    /api/posts/:id/comments     –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É
POST   /api/posts/:id/comments     –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
DELETE /api/comments/:id           –£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
```

### –õ–∞–π–∫–∏

```
POST   /api/posts/:id/like         –ü–æ—Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫
DELETE /api/posts/:id/unlike       –£–±—Ä–∞—Ç—å –ª–∞–π–∫
GET    /api/posts/:id/likes        –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ª–∞–π–∫–Ω—É–≤—à–∏—Ö
```

### –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (Polls)

```
POST   /api/polls                  –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å
GET    /api/polls/:id              –ü–æ–ª—É—á–∏—Ç—å –æ–ø—Ä–æ—Å
POST   /api/polls/:id/vote         –ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å
GET    /api/polls/:id/results      –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
```

### –ü–∏—Ç–æ–º—Ü—ã (–±–∞–∑–æ–≤–æ–µ API, –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ PetID)

```
GET    /api/pets/user/:id          –ü–æ–ª—É—á–∏—Ç—å –ø–∏—Ç–æ–º—Ü–µ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST   /api/pets                   –î–æ–±–∞–≤–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
DELETE /api/pets/:id               –£–¥–∞–ª–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
```

### –ú–µ–¥–∏–∞ (–∞–≤–∞—Ç–∞—Ä—ã, –æ–±–ª–æ–∂–∫–∏, —Ñ–æ—Ç–æ)

```
POST   /api/upload/avatar          –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
DELETE /api/upload/avatar          –£–¥–∞–ª–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
POST   /api/upload/cover           –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±–ª–æ–∂–∫—É
DELETE /api/upload/cover           –£–¥–∞–ª–∏—Ç—å –æ–±–ª–æ–∂–∫—É
POST   /api/upload/media           –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ
GET    /api/media/user/:id         –ü–æ–ª—É—á–∏—Ç—å –≥–∞–ª–µ—Ä–µ—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE /api/media/:id              –£–¥–∞–ª–∏—Ç—å –º–µ–¥–∏–∞
```

### –î—Ä—É–∑—å—è

```
POST   /api/friends/request/:id    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –≤ –¥—Ä—É–∑—å—è
POST   /api/friends/accept/:id     –ü—Ä–∏–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å
POST   /api/friends/reject/:id     –û—Ç–∫–ª–æ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å
DELETE /api/friends/:id            –£–¥–∞–ª–∏—Ç—å –∏–∑ –¥—Ä—É–∑–µ–π
GET    /api/friends                –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
GET    /api/friends/requests       –ü–æ–ª—É—á–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã
```

### –ü–æ–¥–ø–∏—Å–∫–∏ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```
POST   /api/subscriptions/:id      –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE /api/subscriptions/:id      –û—Ç–ø–∏—Å–∞—Ç—å—Å—è
GET    /api/subscriptions          –ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏
GET    /api/subscribers            –ú–æ–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏
```

### –°–æ–æ–±—â–µ–Ω–∏—è (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```
GET    /api/messages               –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤
GET    /api/messages/:userId       –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
POST   /api/messages/:userId       –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
DELETE /api/messages/:id           –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
PUT    /api/messages/:id/read      –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
```

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (DaData)

```
GET    /api/organizations/search   –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–æ –ò–ù–ù/–û–ì–†–ù/–Ω–∞–∑–≤–∞–Ω–∏—é
GET    /api/organizations/:inn     –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
```

### –ì–æ—Ä–æ–¥ –ø–æ IP

```
GET    /api/location/city          –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–æ—Ä–æ–¥ –ø–æ IP
```

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```
GET    /api/analytics/user/:id     –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### NPS –æ–ø—Ä–æ—Å—ã (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```
GET    /api/nps/should-show        –ù—É–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å NPS –æ–ø—Ä–æ—Å
POST   /api/nps/submit             –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç –Ω–∞ NPS
POST   /api/nps/dismiss            –û—Ç–ª–æ–∂–∏—Ç—å –æ–ø—Ä–æ—Å
POST   /api/nps/opt-out            –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –æ–ø—Ä–æ—Å–æ–≤
```

---

## üë• Admin API (localhost:9000)

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

```
GET    /api/admin/users            –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /api/admin/users/:id        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
PUT    /api/admin/users/:id/role   –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
DELETE /api/admin/users/:id        –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–∞–Ω)
POST   /api/admin/users/:id/unban  –†–∞–∑–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –†–æ–ª–∏

```
GET    /api/admin/roles            –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π
POST   /api/admin/roles            –°–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å
PUT    /api/admin/roles/:id        –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å
DELETE /api/admin/roles/:id        –£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å
```

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤

```
GET    /api/admin/posts            –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤
GET    /api/admin/posts/reported   –ü–æ—Å—Ç—ã —Å –∂–∞–ª–æ–±–∞–º–∏
DELETE /api/admin/posts/:id        –£–¥–∞–ª–∏—Ç—å –ø–æ—Å—Ç
POST   /api/admin/posts/:id/hide   –°–∫—Ä—ã—Ç—å –ø–æ—Å—Ç
POST   /api/admin/posts/:id/show   –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å—Ç
```

### –ú–æ–¥–µ—Ä–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

```
GET    /api/admin/messages/reported    –°–æ–æ–±—â–µ–Ω–∏—è —Å –∂–∞–ª–æ–±–∞–º–∏
GET    /api/admin/messages/:id         –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏—è (—Ç–æ–ª—å–∫–æ –ø–æ –∂–∞–ª–æ–±–µ)
DELETE /api/admin/messages/:id         –£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
GET    /api/admin/stats/users          –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /api/admin/stats/posts          –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å—Ç–æ–≤
GET    /api/admin/stats/activity       –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
GET    /api/admin/stats/nps            NPS –º–µ—Ç—Ä–∏–∫–∏
```

### –õ–æ–≥–∏

```
GET    /api/admin/logs                 –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
GET    /api/admin/logs/errors          –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
GET    /api/admin/logs/access          –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
```

### NPS –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

```
GET    /api/admin/nps/dashboard        –î–∞—à–±–æ—Ä–¥ NPS
GET    /api/admin/nps/comments         –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /api/admin/nps/export           –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö NPS
```

---

## üêæ PetID API (localhost:8100)

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** JWT —Ç–æ–∫–µ–Ω—ã –∏–ª–∏ X-User-ID (dev)  
**CORS:** –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ALLOWED_ORIGINS  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –°–º. `petbase/backend/README_AUTH.md`

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä–∏ update/delete
- ‚úÖ User ID –∏–∑ —Ç–æ–∫–µ–Ω–∞, –∞ –Ω–µ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ CORS —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π origins
- ‚è≥ Rate limiting (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- ‚è≥ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### –ü–∏—Ç–æ–º—Ü—ã (CRUD) - üîí –¢—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```
POST   /api/pets                       –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –ø–∏—Ç–æ–º—Ü–∞
GET    /api/pets                       –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–∏—Ç–æ–º—Ü–µ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET    /api/pets/:id                   –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É
GET    /api/pets/:id/summary           –ü–æ–ª—É—á–∏—Ç—å –∫—Ä–∞—Ç–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–¥–ª—è –ø–æ—Å—Ç–æ–≤)
PUT    /api/pets/:id                   –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É (—Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–≥–æ!)
DELETE /api/pets/:id                   –£–¥–∞–ª–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É (—Ç–æ–ª—å–∫–æ —Å–≤–æ–µ–≥–æ!)
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –°–æ–∑–¥–∞—Ç—å –ø–∏—Ç–æ–º—Ü–∞ (user_id –±–µ—Ä—ë—Ç—Å—è –∏–∑ —Ç–æ–∫–µ–Ω–∞)
curl -X POST \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"name":"–ë–∞—Ä—Å–∏–∫","species":"–ö–æ—à–∫–∞","breed":"–ë—Ä–∏—Ç–∞–Ω—Å–∫–∞—è"}' \
  http://localhost:8100/api/pets

# –ü–æ–ª—É—á–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞
curl -H "Authorization: Bearer <token>" \
  http://localhost:8100/api/pets/1

# –û–±–Ω–æ–≤–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª–µ—Ü)
curl -X PUT \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{"name":"–ë–∞—Ä—Å–∏–∫ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π"}' \
  http://localhost:8100/api/pets/1

# –£–¥–∞–ª–∏—Ç—å –ø–∏—Ç–æ–º—Ü–∞ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–ª–∞–¥–µ–ª–µ—Ü)
curl -X DELETE \
  -H "Authorization: Bearer <token>" \
  http://localhost:8100/api/pets/1
```

### –°–ø–∏—Å–∫–∏ –ø–∏—Ç–æ–º—Ü–µ–≤ - üîí –¢—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```
GET    /api/pets/user/:userId          –ü–∏—Ç–æ–º—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET    /api/pets/status/:status        –ü–∏—Ç–æ–º—Ü—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É (home, looking_for_home, lost)
```

**–°—Ç–∞—Ç—É—Å—ã –ø–∏—Ç–æ–º—Ü–µ–≤:**
- `home` - –¥–æ–º–∞ —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
- `looking_for_home` - –∏—â–µ—Ç –¥–æ–º
- `lost` - –ø–æ—Ç–µ—Ä—è–ª—Å—è
- `found` - –Ω–∞–π–¥–µ–Ω
- `deceased` - —É–º–µ—Ä

### –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏ (–ó–æ–æ–ë–∞–∑–∞) - üåê –ü—É–±–ª–∏—á–Ω—ã–µ

```
GET    /api/species                    –°–ø–∏—Å–æ–∫ –≤–∏–¥–æ–≤ –∂–∏–≤–æ—Ç–Ω—ã—Ö
GET    /api/species/:id                –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∏–¥–µ
GET    /api/breeds                     –°–ø–∏—Å–æ–∫ –ø–æ—Ä–æ–¥
GET    /api/breeds/:id                 –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Ä–æ–¥–µ
GET    /api/breeds/species/:id         –ü–æ—Ä–æ–¥—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–∏–¥–∞
GET    /api/cards                      –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ –ø–æ—Ä–æ–¥–∞—Ö
GET    /api/cards/:id                  –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ—Ä–æ–¥—ã
GET    /api/cards/breed/:id            –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ—Ä–æ–¥—ã
```

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –≤–∏–¥—ã (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
curl http://localhost:8100/api/species

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Ä–æ–¥—ã —Å–æ–±–∞–∫
curl http://localhost:8100/api/breeds/species/1

# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ä–æ–¥–µ
curl http://localhost:8100/api/breeds/5
```

### –°–æ–±—ã—Ç–∏—è (–∏—Å—Ç–æ—Ä–∏—è –ø–∏—Ç–æ–º—Ü–∞) - üîí –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è v1.1.0

```
GET    /api/pets/:id/events            –ò—Å—Ç–æ—Ä–∏—è —Å–æ–±—ã—Ç–∏–π –ø–∏—Ç–æ–º—Ü–∞
POST   /api/pets/:id/events            –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ
PUT    /api/events/:id                 –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ
DELETE /api/events/:id                 –£–¥–∞–ª–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ
```

**–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
- `registration` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `ownership_change` - —Å–º–µ–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞
- `sterilization` - —Å—Ç–µ—Ä–∏–ª–∏–∑–∞—Ü–∏—è
- `vaccination` - –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—è
- `medical_visit` - –≤–∏–∑–∏—Ç –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É
- `lost` - –ø–æ—Ç–µ—Ä—è–ª—Å—è
- `found` - –Ω–∞—à—ë–ª—Å—è
- `death` - —Å–º–µ—Ä—Ç—å

### –ß–∏–ø—ã –∏ –º–µ—Ç–∫–∏ - üîí –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è v1.1.0

```
GET    /api/chips/:number              –ù–∞–π—Ç–∏ –ø–∏—Ç–æ–º—Ü–∞ –ø–æ –Ω–æ–º–µ—Ä—É —á–∏–ø–∞
POST   /api/chips                      –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —á–∏–ø
PUT    /api/chips/:id                  –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —á–∏–ø–µ
```

### –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - üîí –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è v1.1.0

```
GET    /api/pets/:id/medical           –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞
POST   /api/pets/:id/medical           –î–æ–±–∞–≤–∏—Ç—å –º–µ–¥–∏—Ü–∏–Ω—Å–∫—É—é –∑–∞–ø–∏—Å—å
GET    /api/pets/:id/vaccinations      –°–ø–∏—Å–æ–∫ –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏–π
POST   /api/pets/:id/vaccinations      –î–æ–±–∞–≤–∏—Ç—å –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏—é
```

### –†–æ–¥–æ—Å–ª–æ–≤–Ω–∞—è - üîí –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è v1.2.0

```
GET    /api/pets/:id/parents           –†–æ–¥–∏—Ç–µ–ª–∏ –ø–∏—Ç–æ–º—Ü–∞
POST   /api/pets/:id/parents           –£–∫–∞–∑–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π
GET    /api/pets/:id/children          –ü–æ—Ç–æ–º–∫–∏ –ø–∏—Ç–æ–º—Ü–∞
```

---

## üè• Shelter API (localhost:8200) - –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è

### –ü—Ä–∏—é—Ç—ã

```
GET    /api/shelter/list               –°–ø–∏—Å–æ–∫ –ø—Ä–∏—é—Ç–æ–≤
GET    /api/shelter/:id                –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏—é—Ç–µ
POST   /api/shelter                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏—é—Ç
PUT    /api/shelter/:id                –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
```

### –ñ–∏–≤–æ—Ç–Ω—ã–µ –≤ –ø—Ä–∏—é—Ç–µ

```
GET    /api/shelter/:id/pets           –ñ–∏–≤–æ—Ç–Ω—ã–µ –≤ –ø—Ä–∏—é—Ç–µ
POST   /api/shelter/:id/pets/intake    –ü—Ä–∏–Ω—è—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ
POST   /api/shelter/:id/pets/adopt     –ü—Ä–∏—Å—Ç—Ä–æ–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ
```

### –í–æ–ª–æ–Ω—Ç—ë—Ä—ã

```
GET    /api/shelter/:id/volunteers     –í–æ–ª–æ–Ω—Ç—ë—Ä—ã –ø—Ä–∏—é—Ç–∞
POST   /api/shelter/:id/volunteers     –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
DELETE /api/shelter/:id/volunteers/:userId –£–¥–∞–ª–∏—Ç—å –≤–æ–ª–æ–Ω—Ç—ë—Ä–∞
```

### –ó–∞–¥–∞—á–∏

```
GET    /api/shelter/tasks              –ú–æ–∏ –∑–∞–¥–∞—á–∏ (–≤–æ–ª–æ–Ω—Ç—ë—Ä)
POST   /api/shelter/tasks              –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
PUT    /api/shelter/tasks/:id          –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
DELETE /api/shelter/tasks/:id          –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
```

### –û–°–í–í (–û—Ç–ª–æ–≤-–°—Ç–µ—Ä–∏–ª–∏–∑–∞—Ü–∏—è-–í–∞–∫—Ü–∏–Ω–∞—Ü–∏—è-–í–æ–∑–≤—Ä–∞—Ç)

```
GET    /api/shelter/osvv/requests      –ó–∞—è–≤–∫–∏ –Ω–∞ –û–°–í–í
POST   /api/shelter/osvv/requests      –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É
PUT    /api/shelter/osvv/requests/:id  –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏
```

### –í–µ—Ç–∫–ª–∏–Ω–∏–∫–∏

```
GET    /api/clinic/:id                 –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–Ω–∏–∫–µ
GET    /api/clinic/:id/schedule        –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∫–ª–∏–Ω–∏–∫–∏
POST   /api/clinic/:id/appointment     –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏—ë–º
GET    /api/clinic/:id/appointments    –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π
```

---

## üìä –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

### Uploads (–º–µ–¥–∏–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

```
GET    /uploads/avatars/:filename      –ê–≤–∞—Ç–∞—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET    /uploads/covers/:filename       –û–±–ª–æ–∂–∫–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π
GET    /uploads/posts/:filename        –ú–µ–¥–∏–∞ –≤ –ø–æ—Å—Ç–∞—Ö
GET    /uploads/pets/:filename         –§–æ—Ç–æ –ø–∏—Ç–æ–º—Ü–µ–≤
```

**Development:** –õ–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–ø–∫–∞ `./uploads/`  
**Production:** S3 / Yandex Object Storage + CDN

---

## üîó –í–Ω–µ—à–Ω–∏–µ API

### DaData (–ø–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π)

```
Endpoint: https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: Main API ‚Üí /api/organizations/search
```

### Yandex Maps

```
Endpoint: https://api-maps.yandex.ru/2.1/
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: Frontend –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
```

### Yandex Object Storage (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

```
Endpoint: https://storage.yandexcloud.net
Bucket: zooplatform-uploads
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ –≤ Production
```

---

## üîÑ WebSocket (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è v1.0.0)

### –†–µ–∞–ª-—Ç–∞–π–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
WS     ws://localhost:8000/ws          WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```

**–°–æ–±—ã—Ç–∏—è:**
- `new_message` - –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `new_comment` - –Ω–æ–≤—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- `new_like` - –Ω–æ–≤—ã–π –ª–∞–π–∫
- `friend_request` - –∑–∞–ø—Ä–æ—Å –≤ –¥—Ä—É–∑—å—è
- `pet_status_change` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–∏—Ç–æ–º—Ü–∞

---

## üì± Mobile API

Mobile –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ API endpoints, —á—Ç–æ –∏ –≤–µ–±-–≤–µ—Ä—Å–∏—è.

**Base URL (Dev):** http://localhost:8000  
**Base URL (Prod):** https://api.zooplatform.ru

---

## üîê –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

| –†–æ–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ | –î–æ—Å—Ç—É–ø |
|------|----------|--------|
| `user` | –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | Main —Å–∞–π—Ç |
| `volunteer` | –í–æ–ª–æ–Ω—Ç—ë—Ä | Main + Shelter (–∑–∞–¥–∞—á–∏) |
| `shelter_admin` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø—Ä–∏—é—Ç–∞ | Main + Shelter (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) |
| `clinic_admin` | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∫–ª–∏–Ω–∏–∫–∏ | Main + Clinic (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ) |
| `moderator` | –ú–æ–¥–µ—Ä–∞—Ç–æ—Ä | Main + Admin (–º–æ–¥–µ—Ä–∞—Ü–∏—è) |
| `superadmin` | –°—É–ø–µ—Ä–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä | –í—Å—ë |

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤:

```go
// Middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏
func RequireRole(role string) gin.HandlerFunc {
    return func(c *gin.Context) {
        userRole := c.GetString("user_role")
        if userRole != role && userRole != "superadmin" {
            c.JSON(403, gin.H{"error": "Forbidden"})
            c.Abort()
            return
        }
        c.Next()
    }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
router.DELETE("/api/admin/posts/:id", RequireRole("moderator"), DeletePost)
```

---

## üìù –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:

```json
{
  "success": true,
  "data": {
    // –¥–∞–Ω–Ω—ã–µ
  }
}
```

### –û—à–∏–±–∫–∞:

```json
{
  "success": false,
  "error": "–û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏"
}
```

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è:

```json
{
  "success": true,
  "data": [...],
  "pagination": {
    "page": 1,
    "per_page": 20,
    "total": 150,
    "total_pages": 8
  }
}
```

---

## üöÄ Rate Limiting

–î–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS –∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π:

| Endpoint | –õ–∏–º–∏—Ç | –°—Ç–∞—Ç—É—Å |
|----------|-------|--------|
| `/api/auth/login` | 5 –∑–∞–ø—Ä–æ—Å–æ–≤ / –º–∏–Ω—É—Ç—É | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `/api/auth/register` | 3 –∑–∞–ø—Ä–æ—Å–∞ / —á–∞—Å | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `/api/posts` (POST) | 10 –ø–æ—Å—Ç–æ–≤ / —á–∞—Å | ‚è≥ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |
| `/api/messages` (POST) | 100 —Å–æ–æ–±—â–µ–Ω–∏–π / —á–∞—Å | ‚è≥ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |
| `/api/pets/*` | 100 –∑–∞–ø—Ä–æ—Å–æ–≤ / –º–∏–Ω—É—Ç—É | ‚è≥ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |
| –û—Å—Ç–∞–ª—å–Ω—ã–µ | 100 –∑–∞–ø—Ä–æ—Å–æ–≤ / –º–∏–Ω—É—Ç—É | ‚è≥ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è |

**–ó–∞–≥–æ–ª–æ–≤–∫–∏ –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ rate limiting:**
```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1640000000
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ CORS —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π origins
- ‚úÖ Prepared statements (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)
- ‚úÖ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- ‚è≥ Rate limiting –¥–ª—è –≤—Å–µ—Ö endpoints
- ‚è≥ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚è≥ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚è≥ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤

1. **–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤:**
   - Web: HttpOnly cookies (–∑–∞—â–∏—Ç–∞ –æ—Ç XSS)
   - Mobile: Secure Storage / Keychain

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - 401 ‚Üí –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ª–æ–≥–∏–Ω
   - 403 ‚Üí –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω"
   - 429 ‚Üí –ü–æ–∫–∞–∑–∞—Ç—å "–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ"

3. **Refresh —Ç–æ–∫–µ–Ω—ã:**
   - Access token: 15 –º–∏–Ω—É—Ç
   - Refresh token: 7 –¥–Ω–µ–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ 401

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

**Swagger/OpenAPI:** (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)  
**Postman Collection:** (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `docs/SECURITY.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `docs/PETBASE_INTEGRATION.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ó–æ–æ–ë–∞–∑—ã
- `petbase/backend/README_AUTH.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `petbase/TESTING_SECURITY.md` - —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- `petbase/INTEGRATION_SUMMARY.md` - —Å–≤–æ–¥–∫–∞ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## üîÆ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –±—É–¥—É—â–µ–º

### v1.1.0 - –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
- `/api/petid/pets/:id/medical` - –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∑–∞–ø–∏—Å–∏
- `/api/clinic/:id/appointments` - –æ–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É

### v1.2.0 - –†–æ–¥–æ—Å–ª–æ–≤–Ω–∞—è
- `/api/petid/pets/:id/parents` - —Ä–æ–¥–∏—Ç–µ–ª–∏ –ø–∏—Ç–æ–º—Ü–∞
- `/api/petid/pets/:id/pedigree` - –ø–æ–ª–Ω–∞—è —Ä–æ–¥–æ—Å–ª–æ–≤–Ω–∞—è

### v1.3.0 - –û–°–í–í –∏ –ø—Ä–∏—é—Ç—ã
- `/api/shelter/osvv/*` - –ø—Ä–æ–≥—Ä–∞–º–º–∞ –û–°–í–í
- `/api/shelter/:id/visits` - –æ–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –Ω–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ –ø—Ä–∏—é—Ç–∞

### v1.4.0 - –í–æ–ª–æ–Ω—Ç—ë—Ä—ã –∏ —Å–±–æ—Ä—ã
- `/api/fundraisers/*` - —Å–±–æ—Ä—ã —Å—Ä–µ–¥—Å—Ç–≤
- `/api/volunteer/fosters` - –ø–µ—Ä–µ–¥–µ—Ä–∂–∫–∏

### v2.0.0 - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- GraphQL API
- WebSocket –¥–ª—è real-time
- Elasticsearch –¥–ª—è –ø–æ–∏—Å–∫–∞

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 29 –¥–µ–∫–∞–±—Ä—è 2024  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 29 –¥–µ–∫–∞–±—Ä—è 2024  
**–ê–≤—Ç–æ—Ä:** –ó–æ–æ–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ Team  
**–í–µ—Ä—Å–∏—è:** 1.1 (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
