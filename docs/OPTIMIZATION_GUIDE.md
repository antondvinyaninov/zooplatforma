# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. N+1 Query Problem (—Å–∞–º–∞—è —á–∞—Å—Ç–∞—è!)

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –≤ —Ü–∏–∫–ª–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞.

‚ùå **–ü–ª–æ—Ö–æ:**
```go
for _, post := range posts {
    poll := loadPollForPost(post.ID) // –ó–∞–ø—Ä–æ—Å –≤ —Ü–∏–∫–ª–µ!
    post.Poll = poll
}
// 20 –ø–æ—Å—Ç–æ–≤ = 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î
```

‚úÖ **–•–æ—Ä–æ—à–æ:**
```go
// –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ ID
postIDs := []int{1, 2, 3, ...}

// –û–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –¥–ª—è –≤—Å–µ—Ö
query := `SELECT * FROM polls WHERE post_id IN (?, ?, ?)`
rows := db.Query(query, postIDs...)

// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –≤ map
pollsMap := make(map[int]*Poll)
for rows.Next() {
    // ...
    pollsMap[poll.PostID] = poll
}

// –ü—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º –∫ –ø–æ—Å—Ç–∞–º
for i := range posts {
    posts[i].Poll = pollsMap[posts[i].ID]
}
// 20 –ø–æ—Å—Ç–æ–≤ = 1 –∑–∞–ø—Ä–æ—Å –∫ –ë–î ‚úÖ
```

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–ø—Ä–æ—Å—ã –±–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ —Å–∫–∞–Ω–∏—Ä—É—é—Ç –≤—Å—é —Ç–∞–±–ª–∏—Ü—É.

‚úÖ **–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã:**
```sql
-- –î–ª—è —á–∞—Å—Ç—ã—Ö JOIN
CREATE INDEX idx_posts_author_id ON posts(author_id);
CREATE INDEX idx_comments_post_id ON comments(post_id);

-- –î–ª—è WHERE —É—Å–ª–æ–≤–∏–π
CREATE INDEX idx_posts_status ON posts(status);
CREATE INDEX idx_posts_created_at ON posts(created_at);

-- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX idx_posts_author_status ON posts(author_id, status);
```

### 3. SELECT * –≤–º–µ—Å—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–æ–ª–µ–π

‚ùå **–ü–ª–æ—Ö–æ:**
```go
query := `SELECT * FROM users` // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –ø–æ–ª—è
```

‚úÖ **–•–æ—Ä–æ—à–æ:**
```go
query := `SELECT id, name, avatar FROM users` // –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
```

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ LIMIT

‚ùå **–ü–ª–æ—Ö–æ:**
```go
query := `SELECT * FROM posts` // –ú–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å –º–∏–ª–ª–∏–æ–Ω—ã –∑–∞–ø–∏—Å–µ–π!
```

‚úÖ **–•–æ—Ä–æ—à–æ:**
```go
query := `SELECT * FROM posts LIMIT 20` // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
```

### 5. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ JSON.Unmarshal –≤ —Ü–∏–∫–ª–µ

‚ùå **–ü–ª–æ—Ö–æ:**
```go
for rows.Next() {
    json.Unmarshal([]byte(data), &result) // –ü–∞—Ä—Å–∏–Ω–≥ –≤ —Ü–∏–∫–ª–µ
}
```

‚úÖ **–õ—É—á—à–µ:** –•—Ä–∞–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö, –∞ –Ω–µ –≤ JSON.

## üìä –ö–∞–∫ –∏–∑–º–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### 1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

```go
start := time.Now()
rows, err := db.Query(query)
duration := time.Since(start)
log.Printf("Query took: %v", duration)
```

### 2. EXPLAIN QUERY PLAN (SQLite)

```sql
EXPLAIN QUERY PLAN 
SELECT * FROM posts 
WHERE author_id = 1 AND status = 'published';
```

–ò—â–∏—Ç–µ:
- `SCAN TABLE` - –ø–ª–æ—Ö–æ (–ø–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
- `SEARCH TABLE USING INDEX` - —Ö–æ—Ä–æ—à–æ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–µ–∫—Å)

### 3. –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ Go

```bash
go test -cpuprofile=cpu.prof -memprofile=mem.prof
go tool pprof cpu.prof
```

## üöÄ –ß–µ–∫–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### Backend (Go)

- [ ] –ù–µ—Ç N+1 –∑–∞–ø—Ä–æ—Å–æ–≤ (–∏—Å–ø–æ–ª—å–∑—É–µ–º batch loading)
- [ ] –í—Å–µ —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–º–µ—é—Ç –∏–Ω–¥–µ–∫—Å—ã
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ–º `SELECT` —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã—Ö –ø–æ–ª–µ–π
- [ ] –ï—Å—Ç—å `LIMIT` –¥–ª—è —Å–ø–∏—Å–∫–æ–≤
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ–º connection pooling
- [ ] –ö—ç—à–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–ø–æ—Ä–æ–¥—ã, —Ä–µ–≥–∏–æ–Ω—ã)
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ–º prepared statements –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤

### Frontend (Next.js)

- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ–º `loading.tsx` –¥–ª—è Suspense
- [ ] Lazy loading –¥–ª—è —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (next/image)
- [ ] –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ tree-shaking
- [ ] Code splitting –ø–æ —Ä–æ—É—Ç–∞–º
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –∑–∞–ø—Ä–æ—Å–æ–≤ (SWR, React Query)
- [ ] –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤

### Database (SQLite)

- [ ] –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö FK
- [ ] –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –ø–æ–ª—è—Ö –≤ WHERE/ORDER BY
- [ ] VACUUM –¥–ª—è –¥–µ—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
- [ ] –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–∏–∑–±–µ–≥–∞–µ–º JSON)
- [ ] –†–µ–≥—É–ª—è—Ä–Ω—ã–µ ANALYZE –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

## üìà –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

### API Response Time
- **–û—Ç–ª–∏—á–Ω–æ:** <100ms
- **–•–æ—Ä–æ—à–æ:** 100-300ms
- **–ü—Ä–∏–µ–º–ª–µ–º–æ:** 300-500ms
- **–ü–ª–æ—Ö–æ:** >500ms

### Database Query Time
- **–û—Ç–ª–∏—á–Ω–æ:** <10ms
- **–•–æ—Ä–æ—à–æ:** 10-50ms
- **–ü—Ä–∏–µ–º–ª–µ–º–æ:** 50-100ms
- **–ü–ª–æ—Ö–æ:** >100ms

### Page Load Time (FCP)
- **–û—Ç–ª–∏—á–Ω–æ:** <1.8s
- **–•–æ—Ä–æ—à–æ:** 1.8-3s
- **–ü–ª–æ—Ö–æ:** >3s

## üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/health` –≤ –∞–¥–º–∏–Ω–∫–µ - —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- `./tests/performance-test.sh` - —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- Chrome DevTools ‚Üí Network/Performance

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- Go pprof - CPU –∏ –ø–∞–º—è—Ç—å
- SQLite EXPLAIN - –ø–ª–∞–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- Lighthouse - Web Vitals

## üìö –ü—Ä–∏–º–µ—Ä—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ

### ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤ (v0.10.6)

**–ë—ã–ª–æ:** 40+ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è 20 –ø–æ—Å—Ç–æ–≤
**–°—Ç–∞–ª–æ:** 3 –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è 20 –ø–æ—Å—Ç–æ–≤
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 10-15x

–§–∞–π–ª—ã:
- `main/backend/handlers/posts_optimized.go`
- `main/backend/handlers/posts.go`

### ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–æ–ª–µ–π (v0.10.6)

**–ë—ã–ª–æ:** –ë–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
**–°—Ç–∞–ª–æ:** –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ–∫—Ü–∏–π
**–£–ª—É—á—à–µ–Ω–∏–µ:** –†–æ–ª–∏ –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É

–§–∞–π–ª: `admin/frontend/app/(dashboard)/users/[id]/page.tsx`

## üéì –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Go Performance Tips](https://github.com/dgryski/go-perfbook)
- [SQLite Query Optimization](https://www.sqlite.org/optoverview.html)
- [Next.js Performance](https://nextjs.org/docs/app/building-your-application/optimizing)
- [Web Vitals](https://web.dev/vitals/)

---

**–ü–æ–º–Ω–∏—Ç–µ:** –ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - –∫–æ—Ä–µ–Ω—å –≤—Å–µ—Ö –∑–æ–ª. –°–Ω–∞—á–∞–ª–∞ –∏–∑–º–µ—Ä—å—Ç–µ, –ø–æ—Ç–æ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ!
