# Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ñ‹ Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğ¼ ÑĞ°Ğ¹Ñ‚Ğ¾Ğ¼

## ĞĞ±Ğ·Ğ¾Ñ€

Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ° (PetID) - ÑÑ‚Ğ¾ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸Ñ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¼ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ¼ Ğ¿Ñ€Ğ°Ğ²Ğ´Ñ‹ (Single Source of Truth) Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°Ñ…. ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚ Ğ·Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‡ĞµÑ€ĞµĞ· API.

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚                          â”‚
â”‚                   (localhost:3000)                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ    â”‚  â”‚    ĞŸĞ¾ÑÑ‚Ñ‹     â”‚  â”‚   ĞŸĞ¸Ñ‚Ğ¾Ğ¼Ñ†Ñ‹    â”‚    â”‚
â”‚  â”‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ â”‚  â”‚              â”‚  â”‚              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                 â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                           â”‚                                â”‚
â”‚                    API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ°                              â”‚
â”‚                   (localhost:8100)                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   REST API                           â”‚  â”‚
â”‚  â”‚  /api/pets, /api/species, /api/breeds              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                â”‚
â”‚                           â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… SQLite                      â”‚  â”‚
â”‚  â”‚         (ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¿Ñ€Ğ°Ğ²Ğ´Ñ‹)                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ğ­Ñ‚Ğ°Ğ¿Ñ‹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

### Ğ­Ñ‚Ğ°Ğ¿ 1: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° CORS

Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑĞ°Ğ¹Ñ‚Ğ°.

**Ğ¤Ğ°Ğ¹Ğ»:** `petbase/backend/main.go`

```go
func corsMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        // Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ°ĞµĞ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑĞ°Ğ¹Ñ‚Ğ°
        w.Header().Set("Access-Control-Allow-Origin", "http://localhost:3000")
        w.Header().Set("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS")
        w.Header().Set("Access-Control-Allow-Headers", "Content-Type, Authorization")
        w.Header().Set("Access-Control-Allow-Credentials", "true")
        
        // ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° preflight Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
        if r.Method == "OPTIONS" {
            w.WriteHeader(http.StatusOK)
            return
        }
        
        next.ServeHTTP(w, r)
    })
}

func main() {
    // ... ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ´ ...
    
    // ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµĞ¼ CORS middleware
    handler := corsMiddleware(mux)
    
    log.Printf("PetBase API server starting on :8100")
    log.Fatal(http.ListenAndServe(":8100", handler))
}
```

### Ğ­Ñ‚Ğ°Ğ¿ 2: API ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ API Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ñ‹.

**Ğ¤Ğ°Ğ¹Ğ»:** `main/frontend/lib/petbase-api.ts`

```typescript
const PETBASE_API_URL = process.env.NEXT_PUBLIC_PETBASE_API_URL || 'http://localhost:8100/api';

export interface Pet {
  id: number;
  user_id: number;
  name: string;
  species: string;
  breed?: string;
  gender?: string;
  birth_date?: string;
  color?: string;
  size?: string;
  weight?: number;
  chip_number?: string;
  tattoo_number?: string;
  ear_tag_number?: string;
  passport_number?: string;
  is_sterilized: boolean;
  sterilization_date?: string;
  is_vaccinated: boolean;
  health_notes?: string;
  character_traits?: string;
  special_needs?: string;
  status: string;
  status_updated_at?: string;
  photo?: string;
  photos?: string;
  story?: string;
  created_at: string;
  updated_at: string;
  // ĞŸĞ¾Ğ»Ñ Ğ¿Ğ°ÑĞ¿Ğ¾Ñ€Ñ‚Ğ°
  distinctive_marks?: string;
  owner_name?: string;
  owner_address?: string;
  owner_phone?: string;
  owner_email?: string;
  blood_type?: string;
  allergies?: string;
  chronic_diseases?: string;
  current_medications?: string;
  pedigree_number?: string;
  registration_org?: string;
  // ĞšÑƒÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ¸ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ
  curator_id?: number;
  curator_name?: string;
  curator_phone?: string;
  location?: string;
  foster_address?: string;
  shelter_name?: string;
}

export interface Species {
  id: number;
  name: string;
  name_en: string;
  description?: string;
  icon?: string;
  created_at: string;
}

export interface Breed {
  id: number;
  species_id: number;
  species_name: string;
  name: string;
  name_en: string;
  description?: string;
  origin?: string;
  size?: string;
  weight_min?: number;
  weight_max?: number;
  lifespan_min?: number;
  lifespan_max?: number;
  temperament?: string;
  care_level?: string;
  photo?: string;
  created_at: string;
}

class PetBaseAPI {
  private baseURL: string;

  constructor(baseURL: string = PETBASE_API_URL) {
    this.baseURL = baseURL;
  }

  // ĞŸĞ¸Ñ‚Ğ¾Ğ¼Ñ†Ñ‹
  async getPets(): Promise<Pet[]> {
    const response = await fetch(`${this.baseURL}/pets`);
    const data = await response.json();
    return data.success ? data.data : [];
  }

  async getPet(id: number): Promise<Pet | null> {
    const response = await fetch(`${this.baseURL}/pets/${id}`);
    const data = await response.json();
    return data.success ? data.data : null;
  }

  async getPetsByUser(userId: number): Promise<Pet[]> {
    const response = await fetch(`${this.baseURL}/pets/user/${userId}`);
    const data = await response.json();
    return data.success ? data.data : [];
  }

  async getPetsByStatus(status: string): Promise<Pet[]> {
    const response = await fetch(`${this.baseURL}/pets/status/${status}`);
    const data = await response.json();
    return data.success ? data.data : [];
  }

  async createPet(pet: Partial<Pet>): Promise<Pet | null> {
    const response = await fetch(`${this.baseURL}/pets`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(pet),
    });
    const data = await response.json();
    return data.success ? data.data : null;
  }

  async updatePet(id: number, pet: Partial<Pet>): Promise<Pet | null> {
    const response = await fetch(`${this.baseURL}/pets/${id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(pet),
    });
    const data = await response.json();
    return data.success ? data.data : null;
  }

  async deletePet(id: number): Promise<boolean> {
    const response = await fetch(`${this.baseURL}/pets/${id}`, {
      method: 'DELETE',
    });
    const data = await response.json();
    return data.success;
  }

  // Ğ’Ğ¸Ğ´Ñ‹
  async getSpecies(): Promise<Species[]> {
    const response = await fetch(`${this.baseURL}/species`);
    const data = await response.json();
    return data.success ? data.data : [];
  }

  // ĞŸĞ¾Ñ€Ğ¾Ğ´Ñ‹
  async getBreeds(): Promise<Breed[]> {
    const response = await fetch(`${this.baseURL}/breeds`);
    const data = await response.json();
    return data.success ? data.data : [];
  }

  async getBreedsBySpecies(speciesId: number): Promise<Breed[]> {
    const response = await fetch(`${this.baseURL}/breeds/species/${speciesId}`);
    const data = await response.json();
    return data.success ? data.data : [];
  }
}

export const petBaseAPI = new PetBaseAPI();
```

### Ğ­Ñ‚Ğ°Ğ¿ 3: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ

#### 3.1. ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ - ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†ĞµĞ²

**Ğ¤Ğ°Ğ¹Ğ»:** `main/frontend/app/profile/page.tsx`

```typescript
'use client';

import { useEffect, useState } from 'react';
import { petBaseAPI, Pet } from '@/lib/petbase-api';

export default function ProfilePage() {
  const [pets, setPets] = useState<Pet[]>([]);
  const [loading, setLoading] = useState(true);
  
  // ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ ID Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· ÑĞµÑÑĞ¸Ğ¸
  const userId = 1; // TODO: Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ· ÑĞµÑÑĞ¸Ğ¸

  useEffect(() => {
    const loadPets = async () => {
      try {
        const userPets = await petBaseAPI.getPetsByUser(userId);
        setPets(userPets);
      } catch (error) {
        console.error('Error loading pets:', error);
      } finally {
        setLoading(false);
      }
    };

    loadPets();
  }, [userId]);

  return (
    <div>
      <h1>ĞœĞ¾Ğ¸ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ñ‹</h1>
      {loading ? (
        <p>Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...</p>
      ) : (
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {pets.map(pet => (
            <div key={pet.id} className="border rounded-lg p-4">
              <h3>{pet.name}</h3>
              <p>{pet.species} {pet.breed && `â€¢ ${pet.breed}`}</p>
              <a href={`http://localhost:4100/pets/${pet.id}`} target="_blank">
                ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ
              </a>
            </div>
          ))}
        </div>
      )}
    </div>
  );
}
```

#### 3.2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ÑÑ‚Ğ° Ñ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ¾Ğ¹ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°

**Ğ¤Ğ°Ğ¹Ğ»:** `main/frontend/app/posts/create/page.tsx`

```typescript
'use client';

import { useEffect, useState } from 'react';
import { petBaseAPI, Pet } from '@/lib/petbase-api';

export default function CreatePostPage() {
  const [pets, setPets] = useState<Pet[]>([]);
  const [selectedPetId, setSelectedPetId] = useState<number | null>(null);
  const userId = 1; // TODO: Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ· ÑĞµÑÑĞ¸Ğ¸

  useEffect(() => {
    const loadPets = async () => {
      const userPets = await petBaseAPI.getPetsByUser(userId);
      setPets(userPets);
    };
    loadPets();
  }, [userId]);

  return (
    <form>
      <h1>Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚</h1>
      
      {/* Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ° */}
      <div>
        <label>Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°</label>
        <select 
          value={selectedPetId || ''} 
          onChange={(e) => setSelectedPetId(Number(e.target.value))}
        >
          <option value="">Ğ‘ĞµĞ· Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°</option>
          {pets.map(pet => (
            <option key={pet.id} value={pet.id}>
              {pet.name} ({pet.species})
            </option>
          ))}
        </select>
      </div>

      {/* ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ¿Ğ¾ÑÑ‚Ğ° */}
      {/* ... */}
    </form>
  );
}
```

#### 3.3. ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ° Ğ² Ğ¿Ğ¾ÑÑ‚Ğµ

**Ğ¤Ğ°Ğ¹Ğ»:** `main/frontend/app/components/PetCard.tsx`

```typescript
'use client';

import { useEffect, useState } from 'react';
import { petBaseAPI, Pet } from '@/lib/petbase-api';

interface PetCardProps {
  petId: number;
}

export default function PetCard({ petId }: PetCardProps) {
  const [pet, setPet] = useState<Pet | null>(null);

  useEffect(() => {
    const loadPet = async () => {
      const petData = await petBaseAPI.getPet(petId);
      setPet(petData);
    };
    loadPet();
  }, [petId]);

  if (!pet) return <div>Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...</div>;

  return (
    <div className="border rounded-lg p-4 bg-gray-50">
      <div className="flex items-center gap-3">
        <div className="text-3xl">ğŸ¾</div>
        <div>
          <h4 className="font-semibold">{pet.name}</h4>
          <p className="text-sm text-gray-600">
            {pet.species} {pet.breed && `â€¢ ${pet.breed}`}
          </p>
        </div>
      </div>
      <a 
        href={`http://localhost:4100/pets/${pet.id}`} 
        target="_blank"
        className="text-blue-600 hover:text-blue-700 text-sm mt-2 inline-block"
      >
        ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ â†’
      </a>
    </div>
  );
}
```

### Ğ­Ñ‚Ğ°Ğ¿ 4: ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

**Ğ¤Ğ°Ğ¹Ğ»:** `main/frontend/.env.local`

```env
NEXT_PUBLIC_PETBASE_API_URL=http://localhost:8100/api
NEXT_PUBLIC_PETBASE_FRONTEND_URL=http://localhost:4100
```

**Ğ¤Ğ°Ğ¹Ğ»:** `petbase/frontend/.env.local`

```env
NEXT_PUBLIC_MAIN_SITE_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:8100/api
```

## Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### 1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°

```
ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚ â†’ POST /api/pets â†’ Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ°
                                    â†“
                              Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ”
                                    â†“
                              Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```

### 2. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ¾ÑÑ‚ Ğ¾ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğµ

```
ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚:
1. GET /api/pets/user/{userId} â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†ĞµĞ²
2. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°
3. POST /api/posts (Ñ pet_id) â†’ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚ Ğ² Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ‘Ğ”
```

### 3. ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ÑÑ‚Ğ° Ñ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†ĞµĞ¼

```
ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚:
1. GET /api/posts â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚Ñ‹ Ğ¸Ğ· Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ‘Ğ”
2. Ğ”Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ÑÑ‚Ğ° Ñ pet_id:
   GET /api/pets/{pet_id} â†’ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ° Ğ¸Ğ· Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ñ‹
3. ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚ Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¾Ğ¹ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°
```

### 4. Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†Ğ°

```
ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ½Ğ° http://localhost:4100/pets/{id}
                                    â†“
                            ĞĞ´Ğ¼Ğ¸Ğ½ĞºĞ° Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ñ‹
                                    â†“
                        PUT /api/pets/{id} â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
                                    â†“
                        Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ÑÑ€Ğ°Ğ·Ñƒ Ğ²Ğ¸Ğ´Ğ½Ñ‹ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ
```

## Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ

1. **Ğ¢Ğ¾ĞºĞµĞ½Ñ‹ JWT**: ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚ JWT Ñ‚Ğ¾ĞºĞµĞ½ Ğ² Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞµ Authorization
2. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ°**: Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ñ‡Ñ‚Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑĞ²Ğ¾Ğ¸Ñ… Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼Ñ†ĞµĞ²

```go
// petbase/backend/middleware/auth.go
func AuthMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        token := r.Header.Get("Authorization")
        
        // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ‚Ğ¾ĞºĞµĞ½Ğ°
        userID, err := validateToken(token)
        if err != nil {
            http.Error(w, "Unauthorized", http.StatusUnauthorized)
            return
        }
        
        // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ userID Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
        ctx := context.WithValue(r.Context(), "userID", userID)
        next.ServeHTTP(w, r.WithContext(ctx))
    })
}
```

### CORS

- Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ°ĞµĞ¼ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ `http://localhost:3000` (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚)
- Ğ’ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğµ: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑĞ°Ğ¹Ñ‚Ğ°

## Ğ Ğ°Ğ·Ğ²Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ

### Development

```bash
# Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» 1: Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ° Backend
cd petbase/backend
air

# Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» 2: Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ° Frontend
cd petbase/frontend
npm run dev

# Ğ¢ĞµÑ€Ğ¼Ğ¸Ğ½Ğ°Ğ» 3: ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚
cd main/frontend
npm run dev
```

### Production

```bash
# Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ° Backend
cd petbase/backend
go build -o petbase-server
./petbase-server

# Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğ° Frontend
cd petbase/frontend
npm run build
npm start

# ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ°Ğ¹Ñ‚
cd main/frontend
npm run build
npm start
```

## ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

- Ğ’ÑĞµ API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ»Ğ¾Ğ³Ğ¸Ñ€ÑƒÑÑ‚ÑÑ
- ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°

### ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸

- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº API
- Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
- ĞÑˆĞ¸Ğ±ĞºĞ¸

## Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸

1. âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ CORS middleware Ğ² Ğ—Ğ¾Ğ¾Ğ‘Ğ°Ğ·Ğµ
2. âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ API ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ
3. â³ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· JWT
4. â³ Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
5. â³ Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ²
6. â³ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
7. â³ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

---

**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** 29 Ğ´ĞµĞºĞ°Ğ±Ñ€Ñ 2024
