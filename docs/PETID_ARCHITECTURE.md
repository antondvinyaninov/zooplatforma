# PetID (PetBase) - ะััะธัะตะบัััะฐ ะตะดะธะฝะพะณะพ ะธััะพัะฝะธะบะฐ ะดะฐะฝะฝัั ะพ ะฟะธัะพะผัะฐั

## ๐ฏ ะะปะฐะฒะฝัะน ะฟัะธะฝัะธะฟ

**PetBase Backend (ะฟะพัั 8100) - ะะะะะกะขะะะะะซะ ะธััะพัะฝะธะบ ะฟัะฐะฒะดั ะดะปั ะะกะะฅ ะดะฐะฝะฝัั ะพ ะฟะธัะพะผัะฐั!**

ะัะต ะพััะฐะปัะฝัะต ะผะธะบัะพัะตัะฒะธัั (Owner, Clinic, Shelter, Main) ัะฐะฑะพัะฐัั ั ะฟะธัะพะผัะฐะผะธ **ะขะะะฌะะ ัะตัะตะท PetBase API**.

## ๐ ะัะฐะฒะธะปัะฝะฐั ะฐััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะกะะะะะะะ ะะะขะะะฆะ                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Owner Frontend (6100)
    โ POST /api/pets
    โ { name, species, breed, age, ... }
    โ
Owner Backend (8400) โ ะะะะะกะ
    โ ะฟัะพะบัะธััะตั ะทะฐะฟัะพั
    โ POST http://localhost:8100/api/pets
    โ Header: X-User-ID: 1
    โ
PetBase Backend (8100) โ ะะะะะกะขะะะะะซะ ะะกะขะะงะะะ ะะะะะะซ
    โ CreatePet handler
    โ INSERT INTO pets (user_id, name, species, ...)
    โ
database/data.db
    โ ัะฐะฑะปะธัะฐ: pets
    โ ะฝะพะฒะฐั ะทะฐะฟะธัั ัะพะทะดะฐะฝะฐ
    โ
PetBase Backend
    โ response: { "success": true, "data": { pet } }
    โ
Owner Backend
    โ ะฒะพะทะฒัะฐัะฐะตั ะดะฐะฝะฝัะต ะพั PetBase ะะะ ะะะะะะะะะ
    โ
Owner Frontend
    โ ะะพะปััะฐะตั ะดะฐะฝะฝัะต ะพั PetBase
    โ ะัะพะฑัะฐะถะฐะตั ะฝะพะฒะพะณะพ ะฟะธัะพะผัะฐ
```

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  ะะะะฃะงะะะะ ะะะขะะะฆะะ                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

Owner Frontend (6100)
    โ GET /api/pets
    โ
Owner Backend (8400) โ ะะะะะกะ
    โ GET http://localhost:8100/api/pets/user/1
    โ
PetBase Backend (8100) โ ะะะะะกะขะะะะะซะ ะะกะขะะงะะะ ะะะะะะซ
    โ GetPetsByUser handler
    โ SELECT * FROM pets WHERE user_id = 1
    โ
database/data.db
    โ ัะฐะฑะปะธัะฐ: pets
    โ ะฒะพะทะฒัะฐัะฐะตั ะฒัะต ะฟะธัะพะผัั ะฟะพะปัะทะพะฒะฐัะตะปั
    โ
PetBase Backend
    โ response: { "success": true, "data": [pets] }
    โ
Owner Backend
    โ ะฒะพะทะฒัะฐัะฐะตั ะดะฐะฝะฝัะต ะพั PetBase ะะะ ะะะะะะะะะ
    โ
Owner Frontend
    โ ะะพะปััะฐะตั ะดะฐะฝะฝัะต ะพั PetBase
    โ ะัะพะฑัะฐะถะฐะตั ัะฟะธัะพะบ ะฟะธัะพะผัะตะฒ
```

## ๐ซ ะงัะพ ะะะะฌะะฏ ะดะตะปะฐัั

### โ ะะะะะะะะะฌะะ: Owner Backend ะฝะฐะฟััะผัั ัะฐะฑะพัะฐะตั ั ะะ

```go
// โ ะะ ะะะะะ ะขะะ!
func GetMyPets(db *sql.DB) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        // ะััะผะพะน ะทะฐะฟัะพั ะบ ะะ - ะะะะะะะะะฌะะ!
        rows, err := db.Query("SELECT * FROM pets WHERE user_id = ?", userID)
        // ...
    }
}
```

### โ ะะะะะะะฌะะ: Owner Backend ะฟัะพะบัะธััะตั ะบ PetBase API

```go
// โ ะะะะะะะฌะะ!
func GetMyPets(db *sql.DB) http.HandlerFunc {
    return func(w http.ResponseWriter, r *http.Request) {
        // ะะฐะฟัะพั ะบ PetBase API - ะะะะะะะฌะะ!
        petbaseURL := fmt.Sprintf("http://localhost:8100/api/pets/user/%d", userID)
        resp, err := http.Get(petbaseURL)
        // ะะพะทะฒัะฐัะฐะตะผ ะดะฐะฝะฝัะต ะพั PetBase
    }
}
```

## ๐ ะัะพ ะธ ะบะฐะบ ัะฐะฑะพัะฐะตั ั ะฟะธัะพะผัะฐะผะธ

### PetBase Backend (8100) - ะะปะฐะดะตะปะตั ะดะฐะฝะฝัั

**ะะพะปั:** ะะดะธะฝััะฒะตะฝะฝัะน ะธััะพัะฝะธะบ ะฟัะฐะฒะดั ะดะปั ะฒัะตั ะดะฐะฝะฝัั ะพ ะฟะธัะพะผัะฐั

**ะงัะพ ะดะตะปะฐะตั:**
- ะกะพะทะดะฐะตั ะฟะธัะพะผัะตะฒ: `POST /api/pets`
- ะงะธัะฐะตั ะฟะธัะพะผัะตะฒ: `GET /api/pets`, `GET /api/pets/:id`, `GET /api/pets/user/:id`
- ะะฑะฝะพะฒะปัะตั ะฟะธัะพะผัะตะฒ: `PUT /api/pets/:id`
- ะฃะดะฐะปัะตั ะฟะธัะพะผัะตะฒ: `DELETE /api/pets/:id`
- ะะฐะฑะพัะฐะตั ะฝะฐะฟััะผัั ั ะะ: `INSERT`, `SELECT`, `UPDATE`, `DELETE`

**Endpoints:**
```
POST   /api/pets              - ัะพะทะดะฐัั ะฟะธัะพะผัะฐ
GET    /api/pets              - ะฒัะต ะฟะธัะพะผัั
GET    /api/pets/:id          - ะบะพะฝะบัะตัะฝัะน ะฟะธัะพะผะตั
GET    /api/pets/user/:id     - ะฟะธัะพะผัั ะฟะพะปัะทะพะฒะฐัะตะปั
PUT    /api/pets/:id          - ะพะฑะฝะพะฒะธัั ะฟะธัะพะผัะฐ
DELETE /api/pets/:id          - ัะดะฐะปะธัั ะฟะธัะพะผัะฐ
GET    /api/pets/:id/summary  - ะบัะฐัะบะฐั ะธะฝัะพัะผะฐัะธั
```

### Owner Backend (8400) - ะัะพะบัะธ

**ะะพะปั:** ะัะพะบัะธ ะผะตะถะดั Owner Frontend ะธ PetBase API

**ะงัะพ ะดะตะปะฐะตั:**
- ะะพะปััะฐะตั ะทะฐะฟัะพัั ะพั Owner Frontend
- ะัะพะฒะตััะตั ะฐะฒัะพัะธะทะฐัะธั (JWT token)
- ะัะพะบัะธััะตั ะทะฐะฟัะพัั ะบ PetBase API
- ะะพะทะฒัะฐัะฐะตั ะดะฐะฝะฝัะต ะพั PetBase ะะะ ะะะะะะะะะ

**ะะ ะดะตะปะฐะตั:**
- โ ะะ ัะธัะฐะตั ะฝะฐะฟััะผัั ะธะท ะะ
- โ ะะ ะฟะธัะตั ะฝะฐะฟััะผัั ะฒ ะะ
- โ ะะ ะธะทะผะตะฝัะตั ะดะฐะฝะฝัะต ะพั PetBase

**Endpoints:**
```
GET  /api/pets       โ GET  http://localhost:8100/api/pets/user/:id
GET  /api/pets/:id   โ GET  http://localhost:8100/api/pets/:id
POST /api/pets       โ POST http://localhost:8100/api/pets
```

### Clinic Backend (8600) - ะัะพะบัะธ

**ะะพะปั:** ะัะพะบัะธ ะผะตะถะดั Clinic Frontend ะธ PetBase API

**ะงัะพ ะดะตะปะฐะตั:**
- ะัะตั ะฟะธัะพะผัะตะฒ ะฟะพ ัะธะฟั/ัะตะปะตัะพะฝั: `GET http://localhost:8100/api/pets/search`
- ะะพะปััะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ะฟะธัะพะผัะต: `GET http://localhost:8100/api/pets/:id`
- ะกะพะทะดะฐะตั ะผะตะดะธัะธะฝัะบะธะต ัะพะฑััะธั: `POST http://localhost:8100/api/petid/:id/events`

**ะะ ะดะตะปะฐะตั:**
- โ ะะ ัะพะทะดะฐะตั ะฟะธัะพะผัะตะฒ (ััะพ ะดะตะปะฐะตั Owner)
- โ ะะ ะธะทะผะตะฝัะตั ะพัะฝะพะฒะฝัะต ะดะฐะฝะฝัะต ะฟะธัะพะผัะฐ (ะธะผั, ะฒะธะด, ะฟะพัะพะดั)
- โ ะะพะถะตั ะดะพะฑะฐะฒะปััั ะผะตะดะธัะธะฝัะบะธะต ะทะฐะฟะธัะธ ัะตัะตะท PetBase API

### Main Backend (8000) - ะงะธัะฐัะตะปั

**ะะพะปั:** ะัะพะฑัะฐะถะฐะตั ะฟะธัะพะผัะตะฒ ะฝะฐ ัััะฐะฝะธัะต ะฟัะพัะธะปั

**ะงัะพ ะดะตะปะฐะตั:**
- ะงะธัะฐะตั ะฟะธัะพะผัะตะฒ ะดะปั ะพัะพะฑัะฐะถะตะฝะธั: `GET http://localhost:8100/api/pets/user/:id`
- ะะพะบะฐะทัะฒะฐะตั ะบัะฐัะบัั ะธะฝัะพัะผะฐัะธั ะฒ ะฟะพััะฐั

**ะะ ะดะตะปะฐะตั:**
- โ ะะ ัะพะทะดะฐะตั ะฟะธัะพะผัะตะฒ (ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตั ะฒ Owner)
- โ ะะ ะธะทะผะตะฝัะตั ะฟะธัะพะผัะตะฒ

## ๐ ะขะฐะฑะปะธัะฐ ะพัะฒะตัััะฒะตะฝะฝะพััะธ

| ะกะตัะฒะธั | ะกะพะทะดะฐะฝะธะต | ะงัะตะฝะธะต | ะะฑะฝะพะฒะปะตะฝะธะต | ะฃะดะฐะปะตะฝะธะต | ะััะผะพะน ะดะพัััะฟ ะบ ะะ |
|--------|----------|--------|------------|----------|-------------------|
| **PetBase** | โ | โ | โ | โ | โ ะะฐ (ะฒะปะฐะดะตะปะตั) |
| **Owner** | โ ัะตัะตะท API | โ ัะตัะตะท API | โ ัะตัะตะท API | โ ัะตัะตะท API | โ ะะตั (ะฟัะพะบัะธ) |
| **Clinic** | โ | โ ัะตัะตะท API | โ๏ธ ัะพะปัะบะพ ะผะตะด.ะทะฐะฟะธัะธ | โ | โ ะะตั (ะฟัะพะบัะธ) |
| **Main** | โ | โ ัะตัะตะท API | โ | โ | โ ะะตั (ัะธัะฐัะตะปั) |
| **Shelter** | โ๏ธ ะดะปั ะฟัะธัััะบะธั | โ ัะตัะตะท API | โ๏ธ ะดะปั ะฟัะธัััะบะธั | โ | โ ะะตั (ะฟัะพะบัะธ) |

## ๐ฏ ะัะตะธะผััะตััะฒะฐ ัะฐะบะพะน ะฐััะธัะตะบัััั

1. **ะะดะธะฝัะน ะธััะพัะฝะธะบ ะฟัะฐะฒะดั** - ะฒัะต ะดะฐะฝะฝัะต ะพ ะฟะธัะพะผัะฐั ะฒ ะพะดะฝะพะผ ะผะตััะต
2. **ะะพะฝัะธััะตะฝัะฝะพััั** - ะฝะตั ะดัะฑะปะธัะพะฒะฐะฝะธั ะดะฐะฝะฝัั
3. **ะะตะทะพะฟะฐัะฝะพััั** - PetBase ะบะพะฝััะพะปะธััะตั ะฒัะต ะพะฟะตัะฐัะธะธ
4. **ะะฐัััะฐะฑะธััะตะผะพััั** - ะปะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต ัะตัะฒะธัั
5. **ะัะปะฐะดะบะฐ** - ะฒัะต ะปะพะณะธ ะฒ ะพะดะฝะพะผ ะผะตััะต (PetBase)
6. **ะะฐะปะธะดะฐัะธั** - ะตะดะธะฝะฐั ัะพัะบะฐ ะฒะฐะปะธะดะฐัะธะธ ะดะฐะฝะฝัั

## ๐ ะะฐะบ ะฟัะพะฒะตัะธัั ะฟัะฐะฒะธะปัะฝะพััั

### ะัะพะฒะตัะบะฐ 1: Owner Backend ะฝะต ะดะพะปะถะตะฝ ะดะตะปะฐัั SQL ะทะฐะฟัะพัั ะบ pets

```bash
# ะัะพะฒะตััะตะผ ะปะพะณะธ Owner Backend
# ะะต ะดะพะปะถะฝะพ ะฑััั: "SELECT * FROM pets"
# ะะพะปะถะฝะพ ะฑััั: "Calling PetBase API"
```

### ะัะพะฒะตัะบะฐ 2: ะัะต ะดะฐะฝะฝัะต ะธะดัั ัะตัะตะท PetBase

```bash
# ะกะพะทะดะฐะตะผ ะฟะธัะพะผัะฐ ัะตัะตะท Owner
curl -X POST http://localhost:8400/api/pets \
  -H "Cookie: auth_token=..." \
  -d '{"name":"ะััะทะธะบ","species":"cat"}'

# ะัะพะฒะตััะตะผ ะปะพะณะธ PetBase - ะดะพะปะถะฝะฐ ะฑััั ะทะฐะฟะธัั:
# "โ Created pet 6: ะััะทะธะบ"
```

### ะัะพะฒะตัะบะฐ 3: Owner ะฒะพะทะฒัะฐัะฐะตั ะดะฐะฝะฝัะต ะพั PetBase

```bash
# ะะฐะฟัะฐัะธะฒะฐะตะผ ะฟะธัะพะผัะตะฒ ัะตัะตะท Owner
curl http://localhost:8400/api/pets -H "Cookie: auth_token=..."

# ะะฐะฟัะฐัะธะฒะฐะตะผ ะฝะฐะฟััะผัั ัะตัะตะท PetBase
curl http://localhost:8100/api/pets/user/1

# ะะฐะฝะฝัะต ะดะพะปะถะฝั ะฑััั ะะะะะขะะงะะซ
```

## ๐ ะะธะณัะฐัะธั ัััะตััะฒัััะตะณะพ ะบะพะดะฐ

ะัะปะธ ะฒ ะบะพะดะต ะตััั ะฟััะผัะต SQL ะทะฐะฟัะพัั ะบ ัะฐะฑะปะธัะต `pets` ะฒะฝะต PetBase:

1. **ะะฐะนัะธ ะฒัะต SQL ะทะฐะฟัะพัั:**
   ```bash
   grep -r "SELECT.*FROM pets" --include="*.go" --exclude-dir="petbase"
   ```

2. **ะะฐะผะตะฝะธัั ะฝะฐ API ะทะฐะฟัะพัั:**
   ```go
   // ะัะปะพ:
   rows, err := db.Query("SELECT * FROM pets WHERE user_id = ?", userID)
   
   // ะกัะฐะปะพ:
   resp, err := http.Get(fmt.Sprintf("http://localhost:8100/api/pets/user/%d", userID))
   ```

3. **ะะฑะฝะพะฒะธัั CHANGELOG.md** ั ะพะฟะธัะฐะฝะธะตะผ ะธะทะผะตะฝะตะฝะธะน

## ๐ ะัะดััะตะต ัะฐะทะฒะธัะธะต

ะะพะณะดะฐ ะฟัะพะตะบั ะฒััะฐััะตั, ะผะพะถะฝะพ ะดะพะฑะฐะฒะธัั:

1. **gRPC** ะฒะผะตััะพ REST ะดะปั backend-to-backend (ะฑััััะตะต)
2. **Message Queue** ะดะปั ะฐัะธะฝััะพะฝะฝัั ะพะฟะตัะฐัะธะน
3. **Redis** ะดะปั ะบััะธัะพะฒะฐะฝะธั ัะฐััะพ ัะธัะฐะตะผัั ะดะฐะฝะฝัั
4. **ะัะดะตะปัะฝะฐั ะะ** ะดะปั PetBase (ะตัะปะธ ะฝัะถะฝะฐ ะธะทะพะปััะธั)

ะะพ ัะตะนัะฐั REST API + ะพะฑัะฐั ะะ - ะพะฟัะธะผะฐะปัะฝะพะต ัะตัะตะฝะธะต! ๐พ

---

**ะะพะผะฝะธ:** PetBase - ะตะดะธะฝััะฒะตะฝะฝัะน ะธััะพัะฝะธะบ ะฟัะฐะฒะดั ะดะปั ะฒัะตั ะดะฐะฝะฝัั ะพ ะฟะธัะพะผัะฐั!
