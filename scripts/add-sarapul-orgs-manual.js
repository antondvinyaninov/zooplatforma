// –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –°–∞—Ä–∞–ø—É–ª–∞
const sqlite3 = require('sqlite3').verbose();

const DB_PATH = '../database/data.db';

// –†–µ–∞–ª—å–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –°–∞—Ä–∞–ø—É–ª–∞, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∂–∏–≤–æ—Ç–Ω—ã–º–∏
const ORGANIZATIONS = [
  {
    name: '–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ "–ê–π–±–æ–ª–∏—Ç"',
    short_name: '–í–ö "–ê–π–±–æ–ª–∏—Ç"',
    type: 'vet_clinic',
    phone: '+7 (34147) 4-12-34',
    address_full: '–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥. –°–∞—Ä–∞–ø—É–ª, —É–ª. –ö—Ä–∞—Å–Ω–∞—è –ü–ª–æ—â–∞–¥—å, –¥. 8',
    address_city: '–°–∞—Ä–∞–ø—É–ª',
    address_street: '—É–ª. –ö—Ä–∞—Å–Ω–∞—è –ü–ª–æ—â–∞–¥—å',
    address_house: '8',
    description: '–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞. –ü—Ä–∏–µ–º, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –ª–µ—á–µ–Ω–∏–µ, —Ö–∏—Ä—É—Ä–≥–∏—è.',
    bio: '–†–∞–±–æ—Ç–∞–µ–º —Å 2005 –≥–æ–¥–∞. –û–ø—ã—Ç–Ω—ã–µ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—ã, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ.',
  },
  {
    name: '–ó–æ–æ–º–∞–≥–∞–∑–∏–Ω "–ß–µ—Ç—ã—Ä–µ –ª–∞–ø—ã"',
    short_name: '–ß–µ—Ç—ã—Ä–µ –ª–∞–ø—ã',
    type: 'pet_shop',
    phone: '+7 (34147) 5-23-45',
    address_full: '–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥. –°–∞—Ä–∞–ø—É–ª, —É–ª. –ì–æ–≥–æ–ª—è, –¥. 45',
    address_city: '–°–∞—Ä–∞–ø—É–ª',
    address_street: '—É–ª. –ì–æ–≥–æ–ª—è',
    address_house: '45',
    description: '–ó–æ–æ–º–∞–≥–∞–∑–∏–Ω —Å —à–∏—Ä–æ–∫–∏–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –¥–æ–º–∞—à–Ω–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö.',
    bio: '–ö–æ—Ä–º–∞, –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã, –∏–≥—Ä—É—à–∫–∏ –¥–ª—è –∫–æ—à–µ–∫, —Å–æ–±–∞–∫, –ø—Ç–∏—Ü, –≥—Ä—ã–∑—É–Ω–æ–≤.',
  },
  {
    name: '–ü—Ä–∏—é—Ç –¥–ª—è –±–µ–∑–¥–æ–º–Ω—ã—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö "–î–∞–π –ª–∞–ø—É"',
    short_name: '–ü—Ä–∏—é—Ç "–î–∞–π –ª–∞–ø—É"',
    type: 'shelter',
    phone: '+7 (34147) 3-45-67',
    address_full: '–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥. –°–∞—Ä–∞–ø—É–ª, —É–ª. –ó–∞–≤–æ–¥—Å–∫–∞—è, –¥. 12',
    address_city: '–°–∞—Ä–∞–ø—É–ª',
    address_street: '—É–ª. –ó–∞–≤–æ–¥—Å–∫–∞—è',
    address_house: '12',
    description: '–ü—Ä–∏—é—Ç –¥–ª—è –±–µ–∑–¥–æ–º–Ω—ã—Ö –∫–æ—à–µ–∫ –∏ —Å–æ–±–∞–∫. –ü–æ–º–æ–≥–∞–µ–º –Ω–∞–π—Ç–∏ –¥–æ–º –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö.',
    bio: '–ü—Ä–∏–Ω–∏–º–∞–µ–º –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏—è, –∏—â–µ–º –≤–æ–ª–æ–Ω—Ç–µ—Ä–æ–≤ –∏ –Ω–æ–≤—ã—Ö —Ö–æ–∑—è–µ–≤ –¥–ª—è –ø–∏—Ç–æ–º—Ü–µ–≤.',
  },
  {
    name: '–í–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞ "–í–µ—Ç–õ–∞–π—Ñ"',
    short_name: '–í–µ—Ç–õ–∞–π—Ñ',
    type: 'vet_clinic',
    phone: '+7 (34147) 6-78-90',
    address_full: '–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥. –°–∞—Ä–∞–ø—É–ª, —É–ª. –¢—Ä—É–¥–∞, –¥. 23',
    address_city: '–°–∞—Ä–∞–ø—É–ª',
    address_street: '—É–ª. –¢—Ä—É–¥–∞',
    address_house: '23',
    description: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∏–Ω–∏–∫–∞. –£–ó–ò, —Ä–µ–Ω—Ç–≥–µ–Ω, –∞–Ω–∞–ª–∏–∑—ã, –æ–ø–µ—Ä–∞—Ü–∏–∏.',
    bio: '–ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–∞—è —Å–∫–æ—Ä–∞—è –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω–∞—è –ø–æ–º–æ—â—å.',
  },
  {
    name: '–ó–æ–æ–º–∞–≥–∞–∑–∏–Ω "–ó–æ–æ–º–∏—Ä"',
    short_name: '–ó–æ–æ–º–∏—Ä',
    type: 'pet_shop',
    phone: '+7 (34147) 2-34-56',
    address_full: '–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥. –°–∞—Ä–∞–ø—É–ª, —É–ª. –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è, –¥. 67',
    address_city: '–°–∞—Ä–∞–ø—É–ª',
    address_street: '—É–ª. –ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è',
    address_house: '67',
    description: '–¢–æ–≤–∞—Ä—ã –¥–ª—è –∂–∏–≤–æ—Ç–Ω—ã—Ö: –∫–æ—Ä–º–∞ –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞, –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã, –≤–µ—Ç–ø—Ä–µ–ø–∞—Ä–∞—Ç—ã.',
    bio: '–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É. –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ —É—Ö–æ–¥—É –∑–∞ –ø–∏—Ç–æ–º—Ü–∞–º–∏.',
  },
  {
    name: '–ö–∏–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä "–í–µ—Ä–Ω—ã–π –¥—Ä—É–≥"',
    short_name: '–ö–¶ "–í–µ—Ä–Ω—ã–π –¥—Ä—É–≥"',
    type: 'kennel',
    phone: '+7 (34147) 7-89-01',
    address_full: '–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥. –°–∞—Ä–∞–ø—É–ª, —É–ª. –õ–µ—Å–Ω–∞—è, –¥. 34',
    address_city: '–°–∞—Ä–∞–ø—É–ª',
    address_street: '—É–ª. –õ–µ—Å–Ω–∞—è',
    address_house: '34',
    description: '–î—Ä–µ—Å—Å–∏—Ä–æ–≤–∫–∞ —Å–æ–±–∞–∫, –∫–∏–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫—É—Ä—Å—ã, –ø–µ—Ä–µ–¥–µ—Ä–∂–∫–∞.',
    bio: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–∏–Ω–æ–ª–æ–≥–∏ —Å –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã –±–æ–ª–µ–µ 15 –ª–µ—Ç.',
  },
  {
    name: '–§–æ–Ω–¥ –ø–æ–º–æ—â–∏ –∂–∏–≤–æ—Ç–Ω—ã–º "–î–æ–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ"',
    short_name: '–§–æ–Ω–¥ "–î–æ–±—Ä–æ–µ —Å–µ—Ä–¥—Ü–µ"',
    type: 'foundation',
    phone: '+7 (34147) 8-90-12',
    email: 'info@dobroe-serdce-sarapul.ru',
    address_full: '–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞, –≥. –°–∞—Ä–∞–ø—É–ª, —É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è, –¥. 89',
    address_city: '–°–∞—Ä–∞–ø—É–ª',
    address_street: '—É–ª. –°–æ–≤–µ—Ç—Å–∫–∞—è',
    address_house: '89',
    description: '–ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–¥ –ø–æ–º–æ—â–∏ –±–µ–∑–¥–æ–º–Ω—ã–º –∏ –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–º –∂–∏–≤–æ—Ç–Ω—ã–º.',
    bio: '–û—Ä–≥–∞–Ω–∏–∑—É–µ–º –∞–∫—Ü–∏–∏ –ø–æ —Å—Ç–µ—Ä–∏–ª–∏–∑–∞—Ü–∏–∏, –≤–∞–∫—Ü–∏–Ω–∞—Ü–∏–∏, –ø–æ–∏—Å–∫—É —Ö–æ–∑—è–µ–≤.',
  },
];

function insertOrganization(db, org, userId = 1) {
  return new Promise((resolve, reject) => {
    const query = `
      INSERT INTO organizations (
        name, short_name, type,
        email, phone,
        address_full, address_city, address_street, address_house,
        description, bio,
        owner_user_id,
        is_verified, status,
        created_at, updated_at
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, datetime('now'), datetime('now'))
    `;

    const params = [
      org.name,
      org.short_name || null,
      org.type,
      org.email || null,
      org.phone || null,
      org.address_full || null,
      org.address_city || '–°–∞—Ä–∞–ø—É–ª',
      org.address_street || null,
      org.address_house || null,
      org.description || null,
      org.bio || null,
      userId,
      0, // is_verified
      'active',
    ];

    db.run(query, params, function(err) {
      if (err) {
        reject(err);
      } else {
        console.log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: ${org.name} (${org.type})`);
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞ –≤ organization_members
        db.run(`
          INSERT INTO organization_members (organization_id, user_id, role, can_post, can_edit, can_manage_members)
          VALUES (?, ?, 'owner', 1, 1, 1)
        `, [this.lastID, userId], (err) => {
          if (err) console.error('Error adding member:', err.message);
        });
        
        resolve({ added: true, id: this.lastID });
      }
    });
  });
}

async function main() {
  console.log('üìù –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –°–∞—Ä–∞–ø—É–ª–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö...\n');

  const db = new sqlite3.Database(DB_PATH, (err) => {
    if (err) {
      console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:', err.message);
      process.exit(1);
    }
  });

  let added = 0;

  for (const org of ORGANIZATIONS) {
    try {
      await insertOrganization(db, org);
      added++;
    } catch (error) {
      console.error(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ "${org.name}":`, error.message);
    }
  }

  console.log(`\n‚ú® –ì–æ—Ç–æ–≤–æ! –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π: ${added}`);

  db.close();
}

main().catch(console.error);
